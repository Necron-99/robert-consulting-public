name: ğŸ§ª Workflow Test

on:
  push:
    branches: [ staging ]
  workflow_dispatch:

jobs:
  test-basic-functionality:
    name: Test Basic Workflow Functionality
    runs-on: ubuntu-latest
    
    steps:
    - name: ğŸ“¥ Checkout code
      uses: actions/checkout@v4
      
    - name: ğŸ” Test file operations
      run: |
        echo "Testing basic file operations..."
        echo "Current directory: $(pwd)"
        echo "Files in repository:"
        ls -la
        echo "âœ… Basic file operations working"
        
    - name: ğŸ Test Python availability
      run: |
        echo "Testing Python availability..."
        python3 --version
        echo "âœ… Python is available"
        
    - name: ğŸ“¦ Test Node.js availability
      run: |
        echo "Testing Node.js availability..."
        node --version
        npm --version
        echo "âœ… Node.js is available"
        
    - name: ğŸ”§ Test Terraform availability
      run: |
        echo "Testing Terraform availability..."
        terraform --version || echo "â„¹ï¸ Terraform not available (expected in some environments)"
        echo "âœ… Terraform test completed"
        
    - name: ğŸ“‹ Test package.json
      run: |
        echo "Testing package.json..."
        if [ -f "package.json" ]; then
          echo "âœ… package.json exists"
          cat package.json | jq '.name, .version' || echo "â„¹ï¸ jq not available, but package.json exists"
        else
          echo "âŒ package.json not found"
          exit 1
        fi
        
    - name: ğŸ—ï¸ Test Terraform files
      run: |
        echo "Testing Terraform files..."
        if [ -d "terraform" ]; then
          echo "âœ… terraform directory exists"
          echo "Terraform files:"
          find terraform -name "*.tf" | head -5
        else
          echo "âŒ terraform directory not found"
          exit 1
        fi
        
    - name: ğŸŒ Test website files
      run: |
        echo "Testing website files..."
        if [ -d "website" ]; then
          echo "âœ… website directory exists"
          echo "Website files:"
          find website -name "*.html" | head -5
        else
          echo "âŒ website directory not found"
          exit 1
        fi
        
    - name: ğŸ“Š Test summary
      run: |
        echo "ğŸ‰ Workflow Test Summary:"
        echo "========================="
        echo "âœ… All basic functionality tests passed"
        echo "âœ… Repository structure is correct"
        echo "âœ… Required files and directories exist"
        echo "âœ… Environment is properly configured"
